# 设计模式

## 面向对象

### 什么是面向对象(OOP)

![oop](/oop.png)

首先，面向对象是一种编程思想，它是基于面向过程而言的。简单来说，面向对象是将功能封装进对象之中，让对象去实现具体的细节。

这种思想将数据作为第一位，而方法或者说是算法作为其次，这是对数据一种优化（**数据结构化**），操作起来更加的方便，简化了过程。

举个简单的栗子：我要去服装店买衣服，那么到店后，我只要“面向”服务员告诉他要什么款式的衣服就可以了（具体衣服是什么做出来的，我并不用知道）；而选好后，服务员只要“面向”我收钱即可（他也不用知道我的钱从哪里来）。

### 面向对象的三要素

三要素是面向对象思想的集中体现：

- 封装：隐藏对象的属性和实现细节，仅对外提供访问方式（分为公开，受保护，私有三种类型）
- 继承：子类可以继承父类的某些特性或方法，提高代码复用性
- 多态：允许不同类的对象对同一消息作出响应（同一接口不同实现）

下面我们用 typeScript 代码来演示一下上面的几点:

#### 封装

```ts
class A {
  name // 公开属性
  protected age // 受保护属性（限子类访问）
  private address // 私有属性（外部不可以访问）

  constructor(name, age) {
    this.name = name
    this.age = age
    this.address = '大明路xxx号'
  }

  saySomething(){
    console.log(this.name);
    console.log(this.age);
  }

  sayAddress(){
    console.log(this.address); // 将报错..
  }
}

let a = new A('小明', 10)
a.saySomething() // 打印： 小明 10
a.sayAddress() // 报错
```

#### 继承

```ts
// 父类
class A {
  name // 公开属性
  age // 公开属性

  constructor(name, age) {
    this.name = name
    this.age = age
  }

  hello(){
    console.log('hello every one');
  }
};

// 子类
class B extends A {
  like

  constructor(name, age, like) {
    super(name, age)
    this.like = like
  }

  say(){
    console.log(`My name is ${this.name}, age ${this.age}, I like ${this.like}`);
  }
};

let s = new Student('小明', 10, '运动')
s.say() // My name is 小明, age 10, I like 运动
s.hello() // hello
```

#### 多态

```ts
// 父类
class A {
  constructor() {}

  say(){
    console.log('hello');
  }
};

// 子类 B
class B extends A {
  constructor() {
    super()
  }

  say(){
    console.log('hello B');
  }
};

// 子类 C
class C extends A {
  constructor() {
    super()
  }

  say(){
    console.log('hello C');
  }
};

let b = new B()
let c = new C()

b.say() // hello B
c.say() // hello C
```

### 面向对象的实际应用

在前端开发中，面向对象的应用场景有很多，此处主要模拟 jQuery 来做示例：

```js
class jQuery {
  constructor(seletor) {
    let slice = Array.prototype.slice
    let dom = slice.call(document.querySelectorAll(seletor))
    let len = dom ? dom.length : 0
    for (let i = 0; i < len; i++) {
      this[i] = dom[i]
    }
    this.length = len
    this.seletor = seletor || ''
  }
  append(node) {}
  addClass(name) {}
  html(data) {}
  // ...此处省略 N 个 API
}

window.$ = function (seletor) {
  return new jQuery(seletor)
}

let $p = $('p')
console.log($p);
```

## 设计原则

首先，我想先聊一聊“设计”这个词汇，究竟什么是设计？

个人的简单理解：设计就是为实现某类功能，而提出的一系列思路或者标准方案。即使同样的功能，它也有多种不同的设计方案来实现。

一个设计的好坏与否，只有伴随着需求的增加，才可以最终体现出来。

而一个优秀的设计，它必定符合设计的五大原则（SOLID）：

- S - 单一职责原则
- O - 开放封闭原则
- L - 李氏置换原则
- I - 接口独立原则
- D - 依赖倒置原则